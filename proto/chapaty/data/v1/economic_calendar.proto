
syntax = "proto3";
package chapaty.data.v1;

option go_package = "github.com/LenWilliamson/chapaty-storage/gen/go/chapaty/data/v1;datav1";

import "google/protobuf/timestamp.proto";

// Batch of economic calendar events.
message EconomicCalendarBatch {
    repeated EconomicCalendarEvent events = 1;
}

// Single economic calendar event (e.g., Non-Farm Payrolls, CPI release).
message EconomicCalendarEvent {
    // UTC timestamp of the event.
    // Converted from local time zone, adjusted for daylight saving time if applicable.
    google.protobuf.Timestamp event_timestamp = 1;

    // Event category from the data source (e.g., investing.com classification).
    string category = 2;

    // Classified event type identifier (e.g., "NFP", "CPI", "FOMC").
    // Empty string if classification was not performed or failed.
    // Classification may be derived from:
    //   - Deterministic text rules (news_type_source = "rule")
    //   - ML/NLP models (news_type_source = "ml" or "nlp")
    //   - Manual curation (news_type_source = "manual")
    string news_type = 3;

    // Confidence score for news_type classification (0.0 to 1.0).
    // Null if news_type is empty or unclassified.
    // Deterministic rules typically use 1.0.
    // ML/NLP models provide calibrated probability scores.
    optional double news_type_confidence = 4;

    // Method used to derive news_type classification.
    // Common values:
    //   "manual" - Manually labeled or curated by a human
    //   "rule"   - Deterministic text-matching or heuristic rules
    //   "ml"     - Machine learning classifier (e.g., BigQuery ML)
    //   "nlp"    - Natural language processing pipeline or LLM
    // Empty string if news_type was not classified.
    string news_type_source = 5;

    // Reporting periodicity of the indicator.
    // Describes the time period over which the metric is measured or compared.
    // Common values:
    //   "mom" - Month-over-Month (e.g., monthly CPI growth)
    //   "qoq" - Quarter-over-Quarter (e.g., quarterly GDP growth)
    //   "yoy" - Year-over-Year (e.g., annual inflation rate)
    // Empty string for non-recurring or irregular events.
    string periodicity = 6;
    
    // Full descriptive name of the event (e.g., "Non-Farm Payrolls Report").
    string news_name = 7;

    // ISO 3166-1 alpha-2 country code (e.g., "US", "GB", "JP").
    // "EZ" is commonly used for Euro Zone.
    string country_code = 8;

    // ISO 4217 currency code (e.g., "USD", "EUR", "GBP").
    string currency_code = 9;

    // Importance level of the event.
    // Typical scale: 1 = Low, 2 = Medium, 3 = High
    // Zero if importance is not assigned or unknown.
    int32 importance = 10;

    // Actual reported value of the economic indicator.
    // Null if not yet released or not applicable.
    optional double actual = 11;
    
    // Forecasted/expected value before release.
    // Null if no forecast was published.
    optional double forecast = 12;
    
    // Previously reported value (from prior release period).
    // Null if not applicable or unavailable.
    optional double previous = 13;
}